/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.9.2
 * 编译日期：2025-03-07 17:59
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：北京鼎新云科技发展有限公司 ，2025-03-07
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x398383=_0x23e6;(function(_0x2a9721,_0x460381){const _0x3eafef={_0x4f1070:0xc6,_0x2d030e:0xec,_0x54223a:0xd9,_0x398989:0xc2,_0x23d37b:0xc7},_0x3c418b=_0x23e6,_0x27492e=_0x2a9721();while(!![]){try{const _0x275c7f=parseInt(_0x3c418b(0xf8))/0x1*(-parseInt(_0x3c418b(0xf3))/0x2)+-parseInt(_0x3c418b(0xd6))/0x3+-parseInt(_0x3c418b(0xef))/0x4*(parseInt(_0x3c418b(0xca))/0x5)+parseInt(_0x3c418b(_0x3eafef._0x4f1070))/0x6*(-parseInt(_0x3c418b(_0x3eafef._0x2d030e))/0x7)+parseInt(_0x3c418b(0xcc))/0x8+-parseInt(_0x3c418b(_0x3eafef._0x54223a))/0x9+-parseInt(_0x3c418b(_0x3eafef._0x398989))/0xa*(-parseInt(_0x3c418b(_0x3eafef._0x23d37b))/0xb);if(_0x275c7f===_0x460381)break;else _0x27492e['push'](_0x27492e['shift']());}catch(_0x39dccc){_0x27492e['push'](_0x27492e['shift']());}}}(_0x524d,0x52901));function _0x524d(){const _0x171f9a=['matrix','SceneMode','lng','_addedHook','none','container','max','layer','isArray','pointerEvents','_map','options','mars3dMapRoam','189CsJUwD','_echartsInstance','position','12pdkRDe','zIndex','create','clientHeight','8meJvKE','_pointerEvents','_mapOffset','top','visibility','28467INzIqO','_showHook','DomUtil','painter','forEach','_echartsContainer','coordinateSystem','Cesium','170WQTxbQ','__esModule','mars3dMap','all','31158INUIaB','942777xBokLg','defineProperty','height','458745UIQXNg','positionWC','5284016jqsmpT','ecInstance','keys','Util','style','EllipsoidalOccluder','clampToGround','_removedHook','getBMap','_mars3d_scene','2028111DXSmJy','scene','width','5165829aHtOZh','_createChartOverlay','dispose','fromDegrees','off','globe'];_0x524d=function(){return _0x171f9a;};return _0x524d();}function _interopNamespace(_0x10f5fe){const _0x556bff={_0x384a17:0xc3,_0x5cc5c6:0xce},_0x55825c={_0x38a4e7:0xc8},_0x23e6ae=_0x23e6;if(_0x10f5fe&&_0x10f5fe[_0x23e6ae(_0x556bff._0x384a17)])return _0x10f5fe;var _0x2f9410=Object[_0x23e6ae(0xf1)](null);return _0x10f5fe&&Object[_0x23e6ae(_0x556bff._0x5cc5c6)](_0x10f5fe)['forEach'](function(_0x44ea10){const _0x130024=_0x23e6ae;if(_0x44ea10!=='default'){var _0x1fd8d6=Object['getOwnPropertyDescriptor'](_0x10f5fe,_0x44ea10);Object[_0x130024(_0x55825c._0x38a4e7)](_0x2f9410,_0x44ea10,_0x1fd8d6['get']?_0x1fd8d6:{'enumerable':!![],'get':function(){return _0x10f5fe[_0x44ea10];}});}}),_0x2f9410['default']=_0x10f5fe,_0x2f9410;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);function _0x23e6(_0x33f8ff,_0x312cc6){const _0x524d6e=_0x524d();return _0x23e6=function(_0x23e6a1,_0x566032){_0x23e6a1=_0x23e6a1-0xbb;let _0x577662=_0x524d6e[_0x23e6a1];return _0x577662;},_0x23e6(_0x33f8ff,_0x312cc6);}const Cesium$1=mars3d__namespace[_0x398383(0xc1)];class CompositeCoordinateSystem{constructor(_0x3c04e5,_0x46796d){const _0x8d1fd7=_0x398383;this['_mars3d_scene']=_0x3c04e5,this['dimensions']=[_0x8d1fd7(0xe1),'lat'],this[_0x8d1fd7(0xf5)]=[0x0,0x0],this['_api']=_0x46796d;}['setMapOffset'](_0x463c73){const _0x5ed10d={_0x3ca513:0xf5},_0x1de718=_0x398383;this[_0x1de718(_0x5ed10d._0x3ca513)]=_0x463c73;}[_0x398383(0xd4)](){const _0x50a7d5=_0x398383;return this[_0x50a7d5(0xd5)];}['dataToPoint'](_0xab5754){const _0x43b693={_0x3e9556:0xcb},_0x31e17b=_0x398383,_0x191fe4=this[_0x31e17b(0xd5)],_0x362a94=[NaN,NaN];let _0x1a6720=_0x191fe4['echartsFixedHeight'];_0x191fe4['echartsAutoHeight']&&(_0x1a6720=_0x191fe4['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0xab5754[0x0],_0xab5754[0x1])));const _0x2ffb13=Cesium$1['Cartesian3']['fromDegrees'](_0xab5754[0x0],_0xab5754[0x1],_0x1a6720);if(!_0x2ffb13)return _0x362a94;const _0x26df09=mars3d__namespace['PointTrans']['toWindowCoordinates'](_0x191fe4,_0x2ffb13);if(!_0x26df09)return _0x362a94;if(_0x191fe4['echartsDepthTest']&&_0x191fe4['mode']===Cesium$1[_0x31e17b(0xe0)]['SCENE3D']){const _0x16f585=new Cesium$1[(_0x31e17b(0xd1))](_0x191fe4[_0x31e17b(0xde)]['ellipsoid'],_0x191fe4['camera'][_0x31e17b(_0x43b693._0x3e9556)]),_0x1e52ec=_0x16f585['isPointVisible'](_0x2ffb13);if(!_0x1e52ec)return _0x362a94;}return[_0x26df09['x']-this['_mapOffset'][0x0],_0x26df09['y']-this[_0x31e17b(0xf5)][0x1]];}['getViewRect'](){const _0x62469c=this['_api'];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x62469c['getWidth'](),_0x62469c['getHeight']());}['getRoamTransform'](){const _0xa19f90=_0x398383;return echarts__namespace[_0xa19f90(0xdf)]['create']();}}CompositeCoordinateSystem['dimensions']=['lng','lat'],CompositeCoordinateSystem[_0x398383(0xf1)]=function(_0x284971,_0x4b494b){const _0x1e1b6a={_0x523c78:0xc0};let _0x855e48;const _0x3e189a=_0x284971['scheduler']['ecInstance']['_mars3d_scene'];_0x284971['eachComponent']('mars3dMap',function(_0x1d4f29){const _0x58fa31=_0x23e6,_0x3cfb84=_0x4b494b['getZr']()[_0x58fa31(0xbd)];if(!_0x3cfb84)return;!_0x855e48&&(_0x855e48=new CompositeCoordinateSystem(_0x3e189a,_0x4b494b)),_0x1d4f29[_0x58fa31(_0x1e1b6a._0x523c78)]=_0x855e48,_0x855e48['setMapOffset'](_0x1d4f29['__mapOffset']||[0x0,0x0]);}),_0x284971['eachSeries'](function(_0x5204d3){const _0xfcb16f=_0x23e6;_0x5204d3['get']('coordinateSystem')==='mars3dMap'&&(!_0x855e48&&(_0x855e48=new CompositeCoordinateSystem(_0x3e189a,_0x4b494b)),_0x5204d3[_0xfcb16f(0xc0)]=_0x855e48);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':_0x398383(0xeb),'event':_0x398383(0xeb),'update':'updateLayout'},function(_0x38b386,_0x195216){}),echarts__namespace['extendComponentModel']({'type':_0x398383(0xc4),'getBMap':function(){const _0x4cd938={_0x45c248:0xd5},_0x16fca7=_0x398383;return this[_0x16fca7(_0x4cd938._0x45c248)];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars3dMap','init':function(_0x422fa0,_0x241335){const _0x1b3d9d={_0x40aee8:0xcd},_0x13ff98=_0x398383;this['api']=_0x241335,this['scene']=_0x422fa0['scheduler'][_0x13ff98(_0x1b3d9d._0x40aee8)][_0x13ff98(0xd5)],this['scene']['postRender']['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0x1a64f1,_0xbad30b){this['api']['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0x5d748e,_0x390c1e,_0x55b61b){},'dispose':function(_0x371c04){this['scene']['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace[_0x398383(0xc1)],BaseLayer=mars3d__namespace[_0x398383(0xe6)]['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x5efb89={}){super(_0x5efb89),this['_pointerEvents']=this['options']['pointerEvents'];}get[_0x398383(0xe6)](){return this['_echartsInstance'];}get['pointerEvents'](){const _0x5eedce=_0x398383;return this[_0x5eedce(0xf4)];}set['pointerEvents'](_0xaebcfc){const _0x419d6e={_0x55c189:0xe8},_0x5ed2d1=_0x398383;this['_pointerEvents']=_0xaebcfc,this['_echartsContainer']&&(_0xaebcfc?this['_echartsContainer']['style'][_0x5ed2d1(0xe8)]='all':this[_0x5ed2d1(0xbf)]['style'][_0x5ed2d1(_0x419d6e._0x55c189)]=_0x5ed2d1(0xe3));}['_setOptionsHook'](_0x4cbf96,_0x3ed6e7){this['setEchartsOption'](_0x4cbf96);}[_0x398383(0xbb)](_0x359871){const _0xecc068={_0x30668c:0xd0,_0x101aab:0xf7},_0x3fa444=_0x398383;_0x359871?this[_0x3fa444(0xbf)][_0x3fa444(_0xecc068._0x30668c)]['visibility']='visible':this['_echartsContainer'][_0x3fa444(_0xecc068._0x30668c)][_0x3fa444(_0xecc068._0x101aab)]='hidden';}['_mountedHook'](){const _0x37cbde={_0x375a9e:0xea,_0x5173ca:0xd7},_0x30f2d9=_0x398383;this['_map']['scene']['echartsDepthTest']=this['options']['depthTest']??!![],this[_0x30f2d9(0xe9)][_0x30f2d9(0xd7)]['echartsAutoHeight']=this[_0x30f2d9(_0x37cbde._0x375a9e)][_0x30f2d9(0xd2)]??![],this['_map'][_0x30f2d9(_0x37cbde._0x5173ca)]['echartsFixedHeight']=this['options']['fixedHeight']??0x0;}[_0x398383(0xe2)](){const _0x432828={_0x2fa319:0xed,_0x54622b:0xea},_0x355742=_0x398383;this['_echartsContainer']=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace['init'](this['_echartsContainer']),this[_0x355742(_0x432828._0x2fa319)][_0x355742(0xd5)]=this['_map']['scene'],this['setEchartsOption'](this[_0x355742(_0x432828._0x54622b)]);}[_0x398383(0xd3)](){const _0x21394b={_0xfa2950:0xdb,_0x4dd9e7:0xbf},_0x4f2a8b=_0x398383;this['_echartsInstance']&&(this['_echartsInstance']['clear'](),this['_echartsInstance'][_0x4f2a8b(_0x21394b._0xfa2950)](),delete this['_echartsInstance']),this[_0x4f2a8b(0xbf)]&&(this[_0x4f2a8b(0xe9)]['container']['removeChild'](this[_0x4f2a8b(_0x21394b._0x4dd9e7)]),delete this[_0x4f2a8b(0xbf)]);}[_0x398383(0xda)](){const _0x3a34e8={_0x928c59:0xe9,_0x338fb4:0xee,_0x50859f:0xd7,_0x49284e:0xc5},_0x365086=_0x398383,_0x57bf71=mars3d__namespace[_0x365086(0xbc)][_0x365086(0xf1)]('div','mars3d-echarts',this[_0x365086(_0x3a34e8._0x928c59)][_0x365086(0xe4)]);return _0x57bf71['id']=this['id'],_0x57bf71[_0x365086(0xd0)][_0x365086(_0x3a34e8._0x338fb4)]='absolute',_0x57bf71[_0x365086(0xd0)][_0x365086(0xf6)]='0px',_0x57bf71['style']['left']='0px',_0x57bf71['style']['width']=this['_map'][_0x365086(_0x3a34e8._0x50859f)]['canvas']['clientWidth']+'px',_0x57bf71['style']['height']=this['_map'][_0x365086(0xd7)]['canvas']['clientHeight']+'px',_0x57bf71['style']['pointerEvents']=this['_pointerEvents']?_0x365086(_0x3a34e8._0x49284e):'none',_0x57bf71[_0x365086(0xd0)][_0x365086(0xf0)]=this['options']['zIndex']??0x9,_0x57bf71;}['resize'](){const _0x19cc6d={_0xc07141:0xbf,_0x1818fd:0xd8},_0x2a5788=_0x398383;if(!this[_0x2a5788(0xed)])return;this[_0x2a5788(_0x19cc6d._0xc07141)]['style'][_0x2a5788(_0x19cc6d._0x1818fd)]=this['_map']['scene']['canvas']['clientWidth']+'px',this['_echartsContainer']['style'][_0x2a5788(0xc9)]=this[_0x2a5788(0xe9)][_0x2a5788(0xd7)]['canvas'][_0x2a5788(0xf2)]+'px',this['_echartsInstance']['resize']();}['setEchartsOption'](_0x3eee60,_0x487d72,_0x55f2dd){const _0x38ff8b=_0x398383;this[_0x38ff8b(0xed)]&&(_0x3eee60={'mars3dMap':{},...mars3d__namespace[_0x38ff8b(0xcf)]['getAttrVal'](_0x3eee60,{'onlySimpleType':!![]})},delete _0x3eee60['eventParent'],this['_echartsInstance']['setOption'](_0x3eee60,_0x487d72,_0x55f2dd));}['getRectangle'](_0x395d5a){const _0x1e50d5={_0x70be56:0xea,_0x5a5435:0xdc},_0x582878={_0x20bcbb:0xe5},_0x40627e=_0x398383;let _0x4b8964,_0x1be35c,_0x210fda,_0x46cf6a;function _0x3ace48(_0x56a228){const _0x143ccd=_0x23e6;if(!Array[_0x143ccd(0xe7)](_0x56a228))return;const _0x473416=_0x56a228[0x0]||0x0,_0x4a4fa8=_0x56a228[0x1]||0x0;_0x473416!==0x0&&_0x4a4fa8!==0x0&&(_0x4b8964===undefined?(_0x4b8964=_0x473416,_0x1be35c=_0x473416,_0x210fda=_0x4a4fa8,_0x46cf6a=_0x4a4fa8):(_0x4b8964=Math['min'](_0x4b8964,_0x473416),_0x1be35c=Math[_0x143ccd(_0x582878._0x20bcbb)](_0x1be35c,_0x473416),_0x210fda=Math['min'](_0x210fda,_0x4a4fa8),_0x46cf6a=Math['max'](_0x46cf6a,_0x4a4fa8)));}const _0xfa7009=this[_0x40627e(_0x1e50d5._0x70be56)]['series'];_0xfa7009&&_0xfa7009['forEach'](_0x516495=>{_0x516495['data']&&_0x516495['data']['forEach'](_0x246ab4=>{if(_0x246ab4['value'])_0x3ace48(_0x246ab4['value']);else _0x246ab4['coords']&&_0x246ab4['coords']['forEach'](_0x46d4ab=>{_0x3ace48(_0x46d4ab);});});});if(_0x4b8964===0x0&&_0x210fda===0x0&&_0x1be35c===0x0&&_0x46cf6a===0x0)return null;return _0x395d5a!==null&&_0x395d5a!==void 0x0&&_0x395d5a['isFormat']?{'xmin':_0x4b8964,'xmax':_0x1be35c,'ymin':_0x210fda,'ymax':_0x46cf6a}:Cesium['Rectangle'][_0x40627e(_0x1e50d5._0x5a5435)](_0x4b8964,_0x210fda,_0x1be35c,_0x46cf6a);}['on'](_0x4c8002,_0x13f1f2,_0x3f442d){const _0x9c1d7e={_0x4537b3:0xed},_0xf0747e=_0x398383;return this[_0xf0747e(_0x9c1d7e._0x4537b3)]['on'](_0x4c8002,_0x13f1f2,_0x3f442d||this),this;}['onByQuery'](_0x315111,_0x3d99f8,_0x5171a8,_0x1f130c){return this['_echartsInstance']['on'](_0x315111,_0x3d99f8,_0x5171a8,_0x1f130c||this),this;}[_0x398383(0xdd)](_0x5467a7,_0x229549,_0x21422a){return this['_echartsInstance']['off'](_0x5467a7,_0x229549,_0x21422a||this),this;}}mars3d__namespace['LayerUtil']['register']('echarts',EchartsLayer),mars3d__namespace['layer']['EchartsLayer']=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)[_0x398383(0xbe)](function(_0x378e80){if(_0x378e80!=='default'&&!exports['hasOwnProperty'](_0x378e80))Object['defineProperty'](exports,_0x378e80,{'enumerable':!![],'get':function(){return echarts[_0x378e80];}});}),Object[_0x398383(0xc8)](exports,'__esModule',{'value':!![]});
}));
